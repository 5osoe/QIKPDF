<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>QIKPDF — Minimal Browser PDF Tool</title>
    
    <meta name="description" content="QIKPDF is a fast, browser-based PDF utility. Convert images to PDF, merge PDFs, split, rotate and export in original quality. 100% local processing.">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta name="theme-color" content="#0a0a0a">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>
    <div id="intro-screen">
        <h1>QIKPDF</h1>
    </div>

    <header>
        <div class="logo-container" id="logo-home">
            <div class="logo-text">QIK<br>PDF</div>
            <div class="led"></div>
        </div>
        <button class="btn-outline" id="btn-about">ABOUT</button>
    </header>

    <main id="main-view">
        <div class="grid">
            <button class="tool-card" data-tool="pdf2img">
                <svg class="pixel-icon" viewBox="0 0 24 24" shape-rendering="crispEdges" fill="currentColor">
                    <path d="M6 2h8l4 4v16H6V2zm2 2v14h8V8h-4V4H8zm6 14v-2h-4v2h4zm-4-4v-2h4v2h-4z"/>
                </svg>
                <span>PDF&rarr;IMG</span>
            </button>
            <button class="tool-card" data-tool="img2pdf">
                <svg class="pixel-icon" viewBox="0 0 24 24" shape-rendering="crispEdges" fill="currentColor">
                    <path d="M4 4h16v16H4V4zm2 2v12h12V6H6zm2 8l2-2 2 2 4-4 2 2v4H8v-2z"/>
                </svg>
                <span>IMG&rarr;PDF</span>
            </button>
            <button class="tool-card" data-tool="merge">
                <svg class="pixel-icon" viewBox="0 0 24 24" shape-rendering="crispEdges" fill="currentColor">
                    <path d="M4 4h6v16H4V4zm8 4h8v12h-8V8zm-2 2H6v8h4v-8zm8 2h-4v6h4v-6z"/>
                </svg>
                <span>MERGE</span>
            </button>
            <button class="tool-card" data-tool="split">
                <svg class="pixel-icon" viewBox="0 0 24 24" shape-rendering="crispEdges" fill="currentColor">
                    <path d="M8 2h8v20H8V2zm2 2v16h4V4h-4zM4 11h2v2H4v-2zm14 0h2v2h-2v-2z"/>
                </svg>
                <span>SPLIT</span>
            </button>
            <button class="tool-card" data-tool="rotate">
                <svg class="pixel-icon" viewBox="0 0 24 24" shape-rendering="crispEdges" fill="currentColor">
                    <path d="M12 2v4H8v12h12V6h-4V2h-4zm2 6h4v8h-8V8h4zm-2 2v2H8v-2h4zm0-6h2v2h-2V4z"/>
                </svg>
                <span>ROTATE</span>
            </button>
        </div>
    </main>

    <main id="tool-view" class="hidden">
        <!-- HEADER -->
        <div class="tool-header">
            <button class="icon-btn" id="btn-back" title="Back">
                <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
            </button>
            
            <h2 id="tool-title" class="title-with-icon">
                <span id="tool-title-icon"></span>
                <span id="tool-title-text">TOOL</span>
            </h2>
            
            <button class="icon-btn" id="btn-info" title="Info">
                <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg>
            </button>
        </div>

        <!-- EDITING UI CONTAINER -->
        <div id="editing-ui">
            <div id="drop-zone" class="drop-zone">
                <span id="drop-text">DROP FILE(S) HERE<br>OR CLICK TO SELECT</span>
                <input type="file" id="file-input" hidden>
            </div>

            <div id="pdf2img-ui" class="hidden">
                <div class="pdf-toolbar">
                    <div class="toolbar-group">
                        <button class="btn-outline" id="btn-select-all">SELECT ALL</button>
                        <button class="btn-outline" id="btn-select-none">NONE</button>
                    </div>
                    <div class="toolbar-group">
                        <span>JUMP TO:</span>
                        <input type="number" id="page-jump-input" class="mini-input" min="1" placeholder="#">
                    </div>
                </div>
                <div id="pdf-grid" class="pdf-grid-container"></div>
            </div>

            <div id="rotate-ui" class="hidden">
                <div class="file-label">SELECTED: <span id="rotate-filename"></span></div>
                <div class="rotate-grid">
                    <button class="btn-outline rotate-btn" data-angle="-90">
                        <span>&#8634; LEFT</span>
                        <small>90&deg; CCW</small>
                    </button>
                    <button class="btn-outline rotate-btn" data-angle="180">
                        <span>&#8644; FLIP</span>
                        <small>180&deg;</small>
                    </button>
                    <button class="btn-outline rotate-btn" data-angle="90">
                        <span>&#8635; RIGHT</span>
                        <small>90&deg; CW</small>
                    </button>
                </div>
            </div>

            <div id="split-ui" class="hidden">
                <div class="file-label">
                    FILE: <span id="split-filename"></span><br>
                    PAGES: <span id="split-pagecount" class="accent-text">...</span>
                </div>
                <div class="split-modes">
                    <label class="radio-container">
                        <input type="radio" name="split-mode" value="all" checked>
                        <span class="radio-checkmark"></span>
                        ALL (SEPARATE FILES)
                    </label>
                    <label class="radio-container">
                        <input type="radio" name="split-mode" value="custom">
                        <span class="radio-checkmark"></span>
                        CUSTOM RANGES
                    </label>
                </div>
                <div id="split-custom-options" class="hidden">
                    <div class="input-group">
                        <label>NUMBER OF OUTPUT FILES:</label>
                        <input type="number" id="split-range-count" min="1" max="20" value="1" class="input-num">
                    </div>
                    <div id="split-ranges-container"></div>
                </div>
            </div>

            <div id="reorder-container" class="hidden"></div>
        </div>
        <!-- END EDITING UI -->

        <div id="progress-container" class="hidden">
            <div id="ascii-progress">[░░░░░░░░░░░░░░░░░░░░]</div>
            <div id="status-text">PROCESSING...</div>
        </div>

        <!-- UNIFIED RESULT CONTAINER (LIST BASED) -->
        <div id="result-container" class="hidden">
            <div class="result-header">
                <span class="success-icon">✓</span> READY
            </div>
            
            <!-- Dynamic Result List -->
            <div id="result-list-wrapper" class="result-list-wrapper"></div>

            <!-- ZIP Info -->
            <div id="result-zip-info" class="hidden">
                <div class="zip-icon">ZIP</div>
                <div id="result-zip-name">archive.zip</div>
            </div>
        </div>
    </main>

    <!-- FOOTER ACTIONS -->
    <div id="global-actions" class="action-footer hidden">
        <button class="btn-primary" id="btn-process">PROCESS PDF</button>
        <button class="btn-primary hidden" id="btn-download-action">DOWNLOAD</button>
        <button class="btn-outline hidden" id="btn-edit-result">EDIT</button>
        <button class="btn-outline hidden" id="btn-clear-result">CLEAR</button>
    </div>

    <!-- MODALS -->
    <div id="info-modal" class="modal hidden" data-modal>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">INFO</h3>
                <button class="btn-modal-close" id="btn-modal-close">X</button>
            </div>
            <div id="modal-body" class="modal-body"></div>
        </div>
    </div>

    <!-- EXPORT MODAL (SIMPLIFIED) -->
    <div id="export-modal" class="modal hidden" data-modal>
        <div class="modal-content">
            <div class="modal-header">
                <h3>SAVE FILE</h3>
                <button class="btn-modal-close" id="btn-export-close">X</button>
            </div>
            <div class="modal-body">
                <div class="input-group-col">
                    <label>FILENAME (OPTIONAL)</label>
                    <input type="text" id="export-filename" class="input-text" placeholder="Enter custom filename...">
                </div>
                
                <div class="modal-actions">
                    <button class="btn-outline flex-1" id="btn-export-cancel">CANCEL</button>
                    <button class="btn-primary flex-1" id="btn-export-confirm">CONFIRM</button>
                </div>
            </div>
        </div>
    </div>

    <!-- UNIFIED PREVIEW MODAL -->
    <div id="preview-modal" class="modal hidden" data-modal>
        <div class="modal-content preview-content">
            <div class="modal-header">
                <h3 id="preview-title">PREVIEW</h3>
                <button class="btn-modal-close" id="btn-preview-close">X</button>
            </div>
            <div class="modal-body preview-body">
                <!-- Image Container -->
                <img id="preview-image" class="preview-media hidden" src="" alt="">
                
                <!-- PDF Container -->
                <div id="preview-pdf-container" class="preview-media hidden">
                    <div class="pdf-controls">
                        <button class="btn-outline" id="btn-pdf-prev">&lt;</button>
                        <span><span id="pdf-page-curr">0</span> / <span id="pdf-page-tot">0</span></span>
                        <button class="btn-outline" id="btn-pdf-next">&gt;</button>
                    </div>
                    <div class="canvas-wrapper">
                        <canvas id="pdf-canvas"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>