<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>QIKPDF — Minimal Browser PDF Tool</title>
    
    <meta name="description" content="QIKPDF is a fast, browser-based PDF utility. Convert images to PDF, merge PDFs, split, rotate and export in original quality. 100% local processing.">
    <meta name="keywords" content="QIKPDF, PDF tool, merge PDF, split PDF, images to PDF, PDF to images, browser PDF utility">
    <meta name="author" content="QIKPDF">

    <!-- Open Graph -->
    <meta property="og:title" content="QIKPDF — Fast Browser PDF Utility">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://qikpdf.vercel.app/">
    <meta property="og:image" content="https://qikpdf.vercel.app/preview.jpg">

    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta name="theme-color" content="#0a0a0a">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>
    <div id="intro-screen">
        <h1>QIKPDF</h1>
    </div>

    <header>
        <div class="logo-container" id="logo-home">
            <div class="logo-text">QIK<br>PDF</div>
            <div class="led"></div>
        </div>
        <div class="header-actions">
            <button class="icon-btn" id="btn-theme" title="Toggle Theme">
                <svg class="theme-sun" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                <svg class="theme-moon" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </button>
            <button class="icon-btn" id="btn-about" title="About">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
            </button>
        </div>
    </header>

    <main id="main-view">
        <div class="grid">
            <!-- TOOL 1: PDF INFO -->
            <button class="tool-card" data-tool="pdfinfo">
                <svg class="pixel-icon" viewBox="0 0 24 24" shape-rendering="crispEdges" fill="currentColor">
                    <path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
                </svg>
                <span>PDF INFO</span>
            </button>
            <!-- TOOL 2: METADATA -->
            <button class="tool-card" data-tool="metadata">
                <svg class="pixel-icon" viewBox="0 0 24 24" shape-rendering="crispEdges" fill="currentColor">
                    <path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"/>
                </svg>
                <span>METADATA</span>
            </button>
            <!-- EXISTING TOOLS -->
            <button class="tool-card" data-tool="pdf2img">
                <svg class="pixel-icon" viewBox="0 0 24 24" shape-rendering="crispEdges" fill="currentColor">
                    <path d="M6 2h8l4 4v16H6V2zm2 2v14h8V8h-4V4H8zm6 14v-2h-4v2h4zm-4-4v-2h4v2h-4z"/>
                </svg>
                <span>PDF&rarr;IMG</span>
            </button>
            <button class="tool-card" data-tool="img2pdf">
                <svg class="pixel-icon" viewBox="0 0 24 24" shape-rendering="crispEdges" fill="currentColor">
                    <path d="M4 4h16v16H4V4zm2 2v12h12V6H6zm2 8l2-2 2 2 4-4 2 2v4H8v-2z"/>
                </svg>
                <span>IMG&rarr;PDF</span>
            </button>
            <button class="tool-card" data-tool="merge">
                <svg class="pixel-icon" viewBox="0 0 24 24" shape-rendering="crispEdges" fill="currentColor">
                    <path d="M4 4h6v16H4V4zm8 4h8v12h-8V8zm-2 2H6v8h4v-8zm8 2h-4v6h4v-6z"/>
                </svg>
                <span>MERGE</span>
            </button>
            <button class="tool-card" data-tool="split">
                <svg class="pixel-icon" viewBox="0 0 24 24" shape-rendering="crispEdges" fill="currentColor">
                    <path d="M8 2h8v20H8V2zm2 2v16h4V4h-4zM4 11h2v2H4v-2zm14 0h2v2h-2v-2z"/>
                </svg>
                <span>SPLIT</span>
            </button>
            <button class="tool-card" data-tool="rotate">
                <svg class="pixel-icon" viewBox="0 0 24 24" shape-rendering="crispEdges" fill="currentColor">
                    <path d="M12 2v4H8v12h12V6h-4V2h-4zm2 6h4v8h-8V8h4zm-2 2v2H8v-2h4zm0-6h2v2h-2V4z"/>
                </svg>
                <span>ROTATE</span>
            </button>
            <!-- NEW TOOL: RESIZE -->
            <button class="tool-card" data-tool="resize">
                <svg class="pixel-icon" viewBox="0 0 24 24" shape-rendering="crispEdges" fill="currentColor">
                    <path d="M21 15h2v2h-2v-2zm0-4h2v2h-2v-2zm2 8h-2v2c1 0 2-1 2-2zM13 3h2v2h-2V3zm8 4h2v2h-2V7zm0-4v2h2c0-1-1-2-2-2zM1 7h2v2H1V7zm16-4h2v2h-2V3zm0 16h2v2h-2v-2zM3 3C2 3 1 4 1 5h2V3zm6 0h2v2H9V3zM5 3h2v2H5V3zm-4 8v8c0 1.1.9 2 2 2h12V11H1v-8zM15 15l-6 6-4-4"/>
                </svg>
                <span>RESIZE</span>
            </button>
        </div>
    </main>

    <main id="tool-view" class="hidden">
        <div class="tool-header">
            <button class="icon-btn" id="btn-back" title="Back">
                <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
            </button>
            
            <h2 id="tool-title" class="title-with-icon">
                <span id="tool-title-icon"></span>
                <span id="tool-title-text">TOOL</span>
            </h2>
            
            <button class="icon-btn" id="btn-info" title="Info">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
            </button>
        </div>

        <div id="drop-zone" class="drop-zone">
            <span id="drop-text">DROP FILE(S) HERE<br>OR CLICK TO SELECT</span>
            <input type="file" id="file-input" hidden>
        </div>

        <!-- PDF INFO UI -->
        <div id="pdf-info-ui" class="hidden">
            <div id="pdf-info-content"></div>
        </div>

        <!-- METADATA UI -->
        <div id="metadata-ui" class="hidden">
            <div class="metadata-form">
                <div class="input-group-col">
                    <label>TITLE</label>
                    <input type="text" id="meta-title" class="input-text">
                </div>
                <div class="input-group-col">
                    <label>AUTHOR</label>
                    <input type="text" id="meta-author" class="input-text">
                </div>
                <div class="input-group-col">
                    <label>SUBJECT</label>
                    <input type="text" id="meta-subject" class="input-text">
                </div>
                <div class="input-group-col">
                    <label>KEYWORDS</label>
                    <input type="text" id="meta-keywords" class="input-text">
                </div>
                <div class="input-group-col">
                    <label>CREATOR</label>
                    <input type="text" id="meta-creator" class="input-text">
                </div>
                <div class="meta-actions">
                    <button id="btn-meta-clear" class="btn-outline">CLEAR ALL METADATA</button>
                </div>
            </div>
        </div>

        <!-- NEW: RESIZE UI -->
        <div id="resize-ui" class="hidden">
            <div class="file-label">
                FILE: <span id="resize-filename-display"></span><br>
                PAGES: <span id="resize-pagecount" class="accent-text">...</span>
            </div>
            
            <div class="input-group-col">
                <label>TARGET PAGE SIZE</label>
                <select id="resize-select" class="input-select">
                    <option value="a4" selected>A4 (210 x 297 mm)</option>
                    <option value="a3">A3 (297 x 420 mm)</option>
                    <option value="a5">A5 (148 x 210 mm)</option>
                    <option value="b4">B4 (250 x 353 mm)</option>
                    <option value="b5">B5 (176 x 250 mm)</option>
                    <option value="custom">CUSTOM SIZE (mm)</option>
                </select>
            </div>

            <div id="resize-custom-group" class="input-row hidden">
                <div class="flex-1">
                    <label>WIDTH (mm)</label>
                    <input type="number" id="resize-width" class="input-text" placeholder="Width">
                </div>
                <div class="flex-1">
                    <label>HEIGHT (mm)</label>
                    <input type="number" id="resize-height" class="input-text" placeholder="Height">
                </div>
            </div>

            <div class="input-group-col" style="margin-top: 16px;">
                <label>OUTPUT FILENAME</label>
                <input type="text" id="resize-name-input" class="input-text" placeholder="e.g. resized_document">
            </div>
        </div>

        <div id="pdf2img-ui" class="hidden">
            <div class="pdf-toolbar">
                <div class="toolbar-group">
                    <button class="btn-outline" id="btn-select-all">SELECT ALL</button>
                    <button class="btn-outline" id="btn-select-none">NONE</button>
                </div>
                <div class="toolbar-group">
                    <input type="number" id="pdf2img-search" class="mini-input search-input" min="1" placeholder="SEARCH PAGE #">
                </div>
            </div>
            <div id="pdf-grid" class="pdf-grid-container"></div>
        </div>

        <div id="rotate-ui" class="hidden">
            <div class="file-label">SELECTED: <span id="rotate-filename"></span></div>
            <div class="rotate-grid">
                <button class="btn-outline rotate-btn" data-angle="-90">
                    <span>&#8634; LEFT</span>
                    <small>90&deg; CCW</small>
                </button>
                <button class="btn-outline rotate-btn" data-angle="180">
                    <span>&#8644; FLIP</span>
                    <small>180&deg;</small>
                </button>
                <button class="btn-outline rotate-btn" data-angle="90">
                    <span>&#8635; RIGHT</span>
                    <small>90&deg; CW</small>
                </button>
            </div>
        </div>

        <div id="split-ui" class="hidden">
            <div class="file-label">
                FILE: <span id="split-filename"></span><br>
                PAGES: <span id="split-pagecount" class="accent-text">...</span>
            </div>
            <div class="split-modes">
                <label class="radio-container">
                    <input type="radio" name="split-mode" value="all" checked>
                    <span class="radio-checkmark"></span>
                    ALL (SEPARATE FILES)
                </label>
                <label class="radio-container">
                    <input type="radio" name="split-mode" value="custom">
                    <span class="radio-checkmark"></span>
                    CUSTOM RANGES
                </label>
            </div>
            <div id="split-custom-options" class="hidden">
                <div class="input-group">
                    <label>NUMBER OF OUTPUT FILES:</label>
                    <input type="number" id="split-range-count" min="1" max="20" value="1" class="input-num">
                </div>
                <div id="split-ranges-container"></div>
            </div>
        </div>

        <div id="reorder-container" class="hidden"></div>

        <div id="progress-container" class="hidden">
            <div id="ascii-progress">[░░░░░░░░░░░░░░░░░░░░]</div>
            <div id="status-text">PROCESSING...</div>
        </div>

        <div id="result-container" class="hidden">
            <!-- Content Injected via JS -->
        </div>
    </main>

    <div id="global-actions" class="action-footer hidden">
        <button class="btn-primary" id="btn-process">PROCESS PDF</button>
        <button class="btn-primary hidden" id="btn-download-action">DOWNLOAD</button>
        <button class="btn-outline hidden" id="btn-clear-result">CLEAR</button>
    </div>

    <!-- MODALS -->
    <div id="info-modal" class="modal hidden" data-modal>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">INFO</h3>
                <button class="btn-modal-close" id="btn-modal-close">X</button>
            </div>
            <div id="modal-body" class="modal-body"></div>
        </div>
    </div>

    <div id="export-modal" class="modal hidden" data-modal>
        <div class="modal-content">
            <div class="modal-header">
                <h3>EXPORT SETTINGS</h3>
                <button class="btn-modal-close" id="btn-export-close">X</button>
            </div>
            <div class="modal-body">
                <div class="input-group-col">
                    <label>FILENAME (OPTIONAL)</label>
                    <input type="text" id="export-filename" class="input-text" placeholder="Result Name">
                </div>
                
                <div class="input-group-col" id="export-size-group">
                    <label>PAGE SIZE</label>
                    <select id="export-size" class="input-select">
                        <option value="default" selected>ORIGINAL (NO CHANGE)</option>
                        <option value="a4">A4 (ISO)</option>
                        <option value="a3">A3 (ISO)</option>
                        <option value="a5">A5 (ISO)</option>
                        <option value="a0">A0 (ISO)</option>
                        <option value="a1">A1 (ISO)</option>
                        <option value="a2">A2 (ISO)</option>
                        <option value="letter">LETTER (US)</option>
                        <option value="legal">LEGAL (US)</option>
                        <option value="custom">CUSTOM SIZE...</option>
                    </select>
                </div>

                <div class="input-group-col hidden" id="export-rotation-group">
                    <label>DOCUMENT ROTATION</label>
                    <select id="export-rotation" class="input-select">
                        <option value="0" selected>NONE (0&deg;)</option>
                        <option value="90">90&deg; CW (RIGHT)</option>
                        <option value="-90">90&deg; CCW (LEFT)</option>
                        <option value="180">180&deg;</option>
                    </select>
                </div>
                
                <div id="custom-size-inputs" class="input-row hidden">
                    <div class="flex-1">
                        <label>WIDTH</label>
                        <input type="number" id="custom-width" class="input-text" placeholder="W">
                    </div>
                    <div class="flex-1">
                        <label>HEIGHT</label>
                        <input type="number" id="custom-height" class="input-text" placeholder="H">
                    </div>
                    <div class="flex-1">
                        <label>UNIT</label>
                        <select id="custom-unit" class="input-select">
                            <option value="mm">mm</option>
                            <option value="cm">cm</option>
                            <option value="inch">in</option>
                        </select>
                    </div>
                </div>

                <div class="modal-actions">
                    <button class="btn-outline flex-1" id="btn-export-cancel">CANCEL</button>
                    <button class="btn-primary flex-1" id="btn-export-confirm">CONFIRM</button>
                </div>
            </div>
        </div>
    </div>

    <!-- LIGHTWEIGHT PREVIEW MODAL -->
    <div id="edit-preview-modal" class="preview-modal hidden">
        <div class="preview-overlay"></div>
        <div class="preview-content">
            <button id="preview-close">✕</button>
            <div id="preview-body"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>